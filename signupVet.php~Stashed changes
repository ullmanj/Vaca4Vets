<html>
  <head>
    <title>Vacations for Veterans</title>
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="stylesheet.css">
  </head>
  
  <header>
    <h2>V4V</h2>
    <p><a class="navlink" href="login.html">LOG IN</a></p>
  </header>

  <body>
    <p class=small><a href="signupVend.html">Sign up as a Vendor</a></p>
    <p class="left1">Please sign up as a <i>Veteran:</i></p>
    <table class="pad">
    <form method="post" enctype="multipart/form-data"> <!-- TO WRAP ALL THIS: -->
      <tr>
        <td>First name:<br>
          <input type="text" name="firstname" value="John"><br><br>
        </td>
        <td>Middle name (Optional):<br>
          <input type="text" name="middlename" value="Rohan"><br><br>
        </td>
        <td>Last name:<br>
          <input type="text" name="lastname" value="Adams"><br><br>
        </td>
        
      </tr>
      <tr>
        <td>Rank:<br>
          <input type="text" name="rank" value="Colonel"><br><br>
        </td>
        <td>Branch:<br>
          <input type="text" name="branch" value="Marines"><br><br>
        </td>
        <td>Active Dates:<br>
          <input type="text" name="aD" value="November 20, 2014 - PRESENT"><br><br>
        </td>
      </tr>
      <tr>
        <td>Email:<br>
          <input type="text" name="email" value="john@adams.com"><br><br>
        </td>
        <td>Phone number:<br>
          <input type="text" name="phone" value="123-456-7890"><br><br>
        </td>
      </tr>
    </table>
    <img class="signup" src="images/grayline.png" alt="gray line" width=300px>
    Username<br>
      <input type="text" name="username" value="johnAdams3"><br><br>
      Password:<br>
      <input type="password" name="password" value="Must be more than 7 characters"><br><br>
      Retype Password:<br>
      <input type="password" name="password2"><br><br>
      <input type="submit" value="Submit" name="createVet">
    </form>
    <!--p class="padleft"><a href="home.html"><button type="button"><b>Continue ></b></button></a></p-->
  </body>
</html>
<?php
include 'sql.php';
if (isset($_POST['createVet'])) 
{
	if(isset($_POST['username']) && isset($_POST['aD']) && isset($_POST['firstname']) && isset($_POST['lastname']) && isset($_POST['rank']) && isset($_POST['branch']) && isset($_POST['email']) && isset($_POST['phone'] && isset($_POST['password']) && isset($_POST['password2']))
	{
		if(duplicateCol($_POST['username'], 'username', 'vets')
			if($_POST['password'] === $_POST['password2'])
			{
    			$array = array("idN" => 46, "first" => '\'' . $_POST['firstname'] . '\'', "middle" => '\'' . $_POST['middlename'] . '\'', "last" => '\'' . $_POST['lastname'] . '\'', "branch" => '\'' . $_POST['branch'] . '\'', 
				"rank" => '\'' . $_POST['rank'] . '\'', "activeD" => '\'' . $_POST['aD'] . '\'', "phoneNum" => '\'' . $_POST['phone'] . '\'', "email" => '\'' . $_POST['email'] . '\'', "dolcu" => '\'NEVER\'', 
				"username" => '\'' . $_POST['username'] . '\'', "password" => '\'' . $_POST['password'] . '\'');
    //adds vet to table: input1 is the column names in order (see above), input2 is the values: strings need to be encompased by single quotes
    //$input1 = "idN, first, middle, last, branch, rank, activeD, phoneNum, email, dolcu, username, password";
    //$input2 = "46, 'Steven', 'Rohan', 'Mcguilligan', 'Marines', 'Gunnery Sergeant', 'November 20, 2014 - PRESENT', '1-011-101-1000', 'steven@mcguilligan.net', 'NEVER', 'StevenMcguilligan1', 
				if(addToTable('vets', $array, 12))
  				{
   		 			echo '<script type="text/javascript">',
					'document.getElementById("myspan").innerHTML ="Added";',
     				'</script>';
  				}
 	 			else
  				{
  		 			echo '<script type="text/javascript">',
     				'document.getElementById("myspan").innerHTML ="Error";',
     				'</script>';
  				}
  			else
  			{
  				echo 'Passwords are not the same'
  			}
  		}
  		else
  		{
			echo 'Username is taken';
  		}
  	}
  	else
  	{
  		echo 'All boxes (Except middle name) must be filled';
  	}
}
?>

